<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras</title>
    <style>
        /* Estilos generales */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: space-around;
            padding: 20px;
        }
    
        /* Estilo de las secciones */
        .product-list, .cart {
            border: 1px solid #ddd;
            padding: 20px;
            width: 300px;
        }
    
        /* Estilo de cada producto */
        .product {
            margin-bottom: 15px;
        }
    
        /* Tamaño de las imágenes de productos */
        .product img {
            max-width: 200px; /* Ajusta el tamaño aquí */
            height: auto; /* Mantiene la proporción */
            display: block;
            margin: 0 auto; /* Centra la imagen */
        }
    
        /* Botón de agregar y eliminar */
        button {
            margin-top: 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
        }
    
        button:hover {
            background-color: #45a049;
        }
        .loader {
            position: fixed; /* Cambiado de absolute a fixed */
            top: 0;
            left: 0;
            z-index: 1000; /* Asegúrate de que tenga un valor de z-index más alto */
            background-color: purple;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: loader 3s linear forwards;
        }
        @keyframes loader{
            0%{
                opacity: 1;
                visibility: visible;
            }
            95%{
                opacity: 1;
                visibility: visible;
            }
            100%{
                opacity: 0;
                visibility: hidden;
            }
        }
        .loader div{
            /**/
            background-color: blue;
            width: 30px;
            height: 150px;
            margin: 40px;
            border-radius: 0%;
            /**/
            transform: scale(0);
            animation: scaling 2s ease-in-out infinite;
        }
        /**/
        .loader div:nth-child(1){animation-delay: 0.2s;}
        .loader div:nth-child(2){animation-delay: 0.4s;}
        .loader div:nth-child(3){animation-delay: 0.6s;}
        .loader div:nth-child(4){animation-delay: 0.8s;}

        @keyframes scaling{
            0%, 100%{transform: scale(0.2);}
            40%{transform: scale(1);}
            50%{transform: scale(1.5);}
            70%{transform: scale(2);}
        }
    </style>
    
</head>
<body>
    <!-- Título de la tienda -->
    <h1>EcoMarket</h1>
    <p><li><a href="entregable2.html">MENU PRINCIPAL</a></li></p>

    <!-- Lista de productos -->
    <div class="product-list">
        <h2>FRUTAS</h2>
        <div class="product" data-name="Mango" data-price="1.50">
            <img src="https://i.ibb.co/fdwQjqf/Mango-single.jpg" alt="Mango-single">
            <h3>Mango</h3>
            <p>$1.50</p>
            <button onclick="addToCart('Manzana', 1.50)">Agregar al carrito</button>
        </div>
        <div class="product" data-name="Platano" data-price="1.00">
            <img src="https://i.ibb.co/4dX47Hx/Bananas.jpg" alt="Bananas">
            <h3>Platano</h3>
            <p>$1.00</p>
            <button onclick="addToCart('Banana', 1.00)">Agregar al carrito</button>
        </div>
        <div class="product" data-name="Sandia" data-price="1.20">
            <img src="https://i.ibb.co/xMxcGyW/251px-Water-melon.jpg" alt="251px-Water-melon">
            <h3>Sandia</h3>
            <p>$1.20</p>
            <button onclick="addToCart('Naranja', 1.20)">Agregar al carrito</button>
        </div>
    </div>

    <div class="product-list">
        <h2>VERDURAS</h2>
        <div class="product" data-name="zanahoria" data-price="1.50">
            <img src="https://i.ibb.co/K6gPmp1/Bunches-of-carrots.jpg" alt="Bunches-of-carrots">
            <h3>zanahoria</h3>
            <p>$1.00</p>
            <button onclick="addToCart('zanahoria', 1.50)">Agregar al carrito</button>
        </div>
        <div class="product" data-name="Cebolla" data-price="1.00">
            <img src="https://i.ibb.co/n0gB70b/250px-Two-colors-of-onions.jpg" alt="250px-Two-colors-of-onions">
            <h3>cebolla</h3>
            <p>$1.00</p>
            <button onclick="addToCart('Cebolla', 1.00)">Agregar al carrito</button>
        </div>
        <div class="product" data-name="Tomate" data-price="1.20">
            <img src="https://i.ibb.co/8MW6Ctj/Bright-red-tomato-and-cross-section02.jpg" alt="tomato">
            <h3>Tomate</h3>
            <p>$1.20</p>
            <button onclick="addToCart('Tomate', 1.20)">Agregar al carrito</button>
        </div>
    </div>

    <div class="product-list">
        <h2>GRANOS, SEMILLAS Y LENGUMBRES</h2>
        <div class="product" data-name="maiz" data-price="1.50">
            <img src="https://i.ibb.co/kccXCRT/Zea-mays-Blanco2-279.png" alt="Zea">
            <h3>Maiz</h3>
            <p>$1.00</p>
            <button onclick="addToCart('Maiz', 1.50)">Agregar al carrito</button>
        </div>
        <div class="product" data-name="Soya" data-price="1.00">
            <img src="https://i.ibb.co/GvJbDmf/soya-46413-l.webp" alt="soya-46413-l">
            <h3>Soya</h3>
            <p>$1.00</p>
            <button onclick="addToCart('Soya', 1.00)">Agregar al carrito</button>
        </div>
        <div class="product" data-name="Frijol" data-price="1.20">
            <img src="https://i.ibb.co/PM9NRhb/Painted-Pony-Bean.jpg" alt="Painted-Pony-Bean">
            <h3>Frijol</h3>
            <p>$1.20</p>
            <button onclick="addToCart('Frijol', 1.20)">Agregar al carrito</button>
        </div>
    </div>

    <!-- Carrito de compras -->
    <div class="cart">
        <h2>Carrito de Compras</h2>
        <ul id="cart-items"></ul>
        <p>Total: $<span id="cart-total">0.00</span></p>
        <button onclick="clearCart()">Vaciar Carrito</button>
        <button onclick="clearCart">Comprar productos</button>
    </div>

    <!-- JavaScript para la lógica del carrito -->
    <script>
        // Array para almacenar los productos del carrito
        let cart = [];

        // Función para agregar un producto al carrito
        function addToCart(name, price) {
            // Buscar el producto en el carrito
            const existingProduct = cart.find(item => item.name === name);

            // Si el producto ya existe en el carrito, aumentar su cantidad
            if (existingProduct) {
                existingProduct.quantity += 1;
            } else {
                // Si no existe, agregar un nuevo objeto con el nombre y precio
                cart.push({ name, price, quantity: 1 });
            }

            // Actualizar la interfaz del carrito
            renderCart();
        }

        // Función para renderizar el carrito en la interfaz
        function renderCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalContainer = document.getElementById('cart-total');

            // Limpiar el contenido actual
            cartItemsContainer.innerHTML = '';

            // Calcular el total
            let total = 0;

            // Crear elementos de lista para cada producto en el carrito
            cart.forEach(item => {
                const itemElement = document.createElement('li');
                itemElement.textContent = `${item.name} - $${item.price} x ${item.quantity}`;
                
                // Botón para eliminar un producto del carrito
                const removeButton = document.createElement('button');
                removeButton.textContent = 'Eliminar';
                removeButton.style.marginLeft = '10px';
                removeButton.onclick = () => removeFromCart(item.name);
                itemElement.appendChild(removeButton);
                
                // Agregar el elemento al contenedor de elementos del carrito
                cartItemsContainer.appendChild(itemElement);

                // Sumar el subtotal al total
                total += item.price * item.quantity;
            });

            // Mostrar el total actualizado
            cartTotalContainer.textContent = total.toFixed(2);
        }

        // Función para eliminar un producto del carrito
        function removeFromCart(name) {
            // Buscar el producto en el carrito y eliminarlo o reducir su cantidad
            const productIndex = cart.findIndex(item => item.name === name);

            if (productIndex !== -1) {
                const product = cart[productIndex];
                if (product.quantity > 1) {
                    product.quantity -= 1;
                } else {
                    cart.splice(productIndex, 1);
                }
            }

            // Actualizar la interfaz del carrito
            renderCart();
        }

        // Función para vaciar el carrito
        function clearCart() {
            cart = [];
            renderCart();
        }
    </script>
    <section class="loader">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </section>
    <div class="page">
        <!-- Main Content -->
        <!-- ... resto del contenido ... -->
        </div>
    </div>
</body>
</html>
